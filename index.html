<!DOCTYPE html>
<html>
    <head>
        <title>Kai aus Hannover Linksammlung</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/style.css">
        <script src="js/jquery-3.2.1.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script type="text/javascript">
            var $ = jQuery;
            var check = null;
            var download = null;
            function anzeigen(inhalt) {
                download = inhalt.data.tree;
            }
            function aufbauen() {
                for (var i = download.length - 1; i >= 0; --i) {
                    if (download[i].path.substring(0, 6) == "Links/" && download[i].type == "blob") {
                        var pfad = download[i].path;
                        var name = pfad.split('.').reverse().slice(1).reverse().join('.').split("/").slice(1);
                        $("body").append('<a class="link versteckt collapsed" id="link-' + i + '"data-toggle="collapse" href="#' + i + '" aria-expanded="false" aria-controls="footwear">' + name + '</a><div class="inhalt collapse" id="' + i + '"><div class="fehler404">Ups Fehler 404</div></div>');
                        (function(i, pfad) {
                            $("#" + i).load(encodeURIComponent(pfad), function(inhalt, ergebnis) {
                                if (ergebnis == "success") {
                                    var youtube = $("#" + i + " .youtube").length ? '<a target="_blank" class="youtube" href="' + $("#" + i + " .youtube").attr("href") + '">YouTube</a>' : "";
                                    var dailymotion = $("#" + i + " .dailymotion").length ? '<a target="_blank" class="dailymotion" href="' + $("#" + i + " .dailymotion").attr("href") + '">dailymotion</a>' : "";
                                    $("#link-" + i).removeClass("versteckt");
                                    $('<div class="videos">' + youtube + dailymotion + '</div>').insertAfter("#link-" + i);
                                    $("#kein_js2").remove();
                                    $("#" + i + " .youtube").remove();
                                    $("#" + i + " .dailymotion").remove();
                                }
                            });
                        })(i, pfad);
                    }
                }
            }
            function checken() {
                check !== download ? aufbauen() : setTimeout(checken, 50);
            }
            $(document).ready(function(){
                checken();
                $("#kein_js1").remove();
                download == null ? null : $("#kein_js2").remove();
            });
        </script>
        <script src="https://api.github.com/repos/Kai-aus-Hannover/Kaitag/git/trees/master?recursive=1&callback=anzeigen"></script>
    </head>
    <body>
        <h1 type="button" data-toggle="collapse" aria-expanded="true" data-target=".collapse">Kai aus Hannover Linksammlung</h1>
        <div class="fehler" id="kein_js1">Fehler Javascript ist nicht aktiviert.</div>
        <div class="fehler" id="kein_js2">Fehler 404 keine Antwort von api.github.com</div>
    </body>
</html>
